<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8">
		<title>ESA SCADA</title>
		<meta name="viewport" content="height=device-height, width=device-width, initial-scale=1">

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

		<style>
			p.scada_indent {
				margin-left: 20px; /* Отступ слева */
				margin-block-start: 0; 
				margin-block-end: 0;
				text-align: justify;
			}
			body.summary_page {
				background-color: #d7e1ef;
				font-weight: 500;
				color: lightslategray;
			}
			div.svg_embedded {
				color: lightslategray;
				font: 12px arial;
				height: 100%;
				overflow: auto;
			}
		</style>

		<script type="text/javascript">
			function floorChart() {
				setInterval(
					function() {
						var req = new XMLHttpRequest();
						req.open("POST", "http://192.168.22.252:8686/parameter/?page=2");
						req.onreadystatechange = function() {
							if(this.readyState === 4 && this.status === 200) {
								parameters = JSON.parse(this.response);
								for(let i=0; i < parameters.length; i++) {
									let elem = document.getElementById(parameters[i].ID);
									if(elem != null) {
										elem.innerHTML = parameters[i].Value;
										elem.style.fill = parameters[i].color;
									};
								};
							};
						};
						req.send();
					}, 
					5000
				);
			};

			function svgScale() {
				h = window.innerHeight;
				w = window.innerWidth;
				let elem = document.getElementById("floor_2"); 
				if(elem !=null) { 
					elem.style.width = w *0.95;
					elem.style.height = h * 0.95;
				};
			};

//			floorChart();

		
		</script>
	</head>
	<body class="summary_page" onresize="svgScale();" onload="svgScale();">
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-8">
				<form id="navigation">
					<button buttontype="submit" class="btn btn-basic" formmethod="get" formaction="http://192.168.22.252:8686/page_1">Сводная</button>
					<button buttontype="submit" class="btn btn-basic" formmethod="get" formaction="http://192.168.22.252:8686/page_2" disabled>2 Этаж</button>
					<button buttontype="submit" class="btn btn-basic" formmethod="get" formaction="http://192.168.22.252:8686/page_3">3 Этаж</button>
				</form>
			</div>
			<div class="col-sm-2">
				<p id="floor_label" style="font-size: 1.5em">Этаж 2</p>
			</div>
		</div>
	</div>
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-12">
				<div class="container-fluid" >
			<svg id="floor_2" width="1600" height="800" viewBox="0 0 800 500" preserveAspectRatio='none'  xmlns="http://www.w3.org/2000/svg" version="1.1">
			<path id="svg_1" stroke-width="0.5" stroke="black" fill="none" d="m417.1,205.19l-41.69,-34.73m0,0l41.69,0m0,0l-41.69,34.73m0,0l41.69,0"/>
			<path id="svg_2" stroke-width="0.5" stroke="black" fill="none" d="m0.25,0.25l0,434.2m0,0l795.48,0m0,0l0,-434.2m0,0l-795.48,0"/>
			<path id="svg_3" stroke-width="0.5" stroke="black" fill="none" d="m417.1,198.24l3.47,0m0,0l0,10.43m0,0l41.68,0m0,0l0,13.89m0,0l-100.73,0m0,0l0,6.95m0,0l-3.48,0m0,0l0,-20.84m0,0l13.9,0m0,0l0,-10.43m0,0l3.47,0m0,0l0,10.43m0,0l41.69,0m0,0l0,-10.43"/>
			<path id="svg_4" stroke-width="0.5" stroke="black" fill="none" d="m371.94,177.4l0,-10.42m0,0l-13.9,0m0,0l0,-3.47m0,0l6.95,0m0,0l0,-13.9m0,0l3.47,0m0,0l0,13.9m0,0l34.74,0m0,0l0,-52.11m0,0l-34.74,0m0,0l0,13.9m0,0l-3.47,0m0,0l0,-13.9m0,0l-3.47,0m0,0l0,-6.94m0,0l3.47,0m0,0l0,3.47m0,0l38.21,0m0,0l0,-34.74m0,0l-38.21,0m0,0l0,3.48m0,0l-3.47,0m0,0l0,-3.48m0,0l-3.48,0m0,0l0,-3.47m0,0l48.63,0m0,0l0,93.79m0,0l55.58,0m0,0l0,3.47m0,0l-41.68,0m0,0l0,10.42m0,0l-3.47,0m0,0l0,-10.42m0,0l-41.69,0m0,0l0,10.42"/>
			<path id="svg_5" stroke-width="0.5" stroke="black" fill="none" d="m100.99,17.61l-83.37,0m0,0l0,107.69m0,0l132,0m0,0l0,-20.84m0,0l6.95,0m0,0l0,31.26m0,0l-6.95,0m0,0l0,-6.95m0,0l-132,0m0,0l0,79.9m0,0l132,0m0,0l0,-41.69m0,0l6.95,0m0,0l0,41.69m0,0l17.37,0m0,0l0,13.89m0,0l-13.9,0m0,0l0,17.37m0,0l-3.47,0m0,0l0,-17.37m0,0l-138.95,0m0,0l0,194.53m0,0l187.58,0m0,0l0,-69.48m0,0l-45.16,0m0,0l0,-59.05m0,0l-13.89,0m0,0l0,-3.47m0,0l10.42,0m0,0l0,-13.9m0,0l3.47,0m0,0l0,13.9m0,0l111.16,0m0,0l0,-6.95m0,0l3.47,0m0,0l0,6.95m0,0l83.37,0m0,0l0,-6.95m0,0l3.48,0m0,0l0,10.42m0,0l-149.37,0m0,0l0,128.53m0,0l208.42,0m0,0l0,-128.53"/>
			<path id="svg_6" stroke-width="0.5" stroke="black" fill="none" d="m420.57,288.56l-3.47,0m0,0l0,-3.47m0,0l34.73,0m0,0l0,3.47m0,0l-27.79,0m0,0l0,128.53m0,0l104.21,0m0,0l0,-128.53m0,0l-45.15,0m0,0l0,-3.47m0,0l62.52,0m0,0l0,3.47m0,0l-13.89,0m0,0l0,128.53m0,0l100.73,0m0,0l0,-128.53m0,0l-55.58,0m0,0l0,-3.47m0,0l142.43,0m0,0l0,3.47m0,0l-83.37,0m0,0l0,128.53m0,0l142.42,0m0,0l0,-128.53m0,0l-24.32,0m0,0l0,-3.47m0,0l24.32,0m0,0l0,-62.53m0,0l-104.21,0m0,0l0,-13.89m0,0l104.21,0m0,0l0,-52.11m0,0l-20.84,0m0,0l0,-3.47m0,0l20.84,0m0,0l0,-135.48m0,0l-142.42,0m0,0l0,135.48m0,0l69.47,0m0,0l0,3.47m0,0l-69.47,0m0,0l0,52.11m0,0l6.94,0m0,0l0,13.89m0,0l-86.84,0m0,0l0,-13.89m0,0l76.42,0m0,0l0,-191.06m0,0l-114.63,0m0,0l0,191.06m0,0l3.48,0m0,0l0,13.89m0,0l-24.32,0m0,0l0,-13.89m0,0l17.37,0m0,0l0,-41.69m0,0l-17.37,-0.01m0,0l0,-3.46m0,0l17.37,0m0,0l0,-145.9m0,0l-191.05,0m0,0l0,191.06m0,0l3.47,0m0,0l0,13.89m0,0l-52.11,0m0,0l0,6.95m0,0l-3.47,0m0,0l0,-6.95m0,0l-62.53,0m0,0l0,-13.89m0,0l6.95,0m0,0l0,-3.48m0,0l13.9,0m0,0l0,3.48m0,0l79.89,0m0,0l0,-191.06m0,0l-79.89,0m0,0l0,149.37m0,0l-13.9,0m0,0l0,-149.37m0,0l-62.52,0m0,0l0,55.58m0,0l-52.11,0m0,0l0,-55.58"/>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_7" y="29.99989" x="26.3748" stroke-width="0" stroke="#000" fill="#000000">203. Склад</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_8" y="143.04013" x="27.40492" stroke-width="0" stroke="#000" fill="#000000">204. Комната отдыха</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_9" y="301.95887" x="432.80985" stroke-width="0" stroke="#000" fill="#000000">210. Прием животных</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_10" y="314.39129" x="430.10715" stroke-width="0" stroke="#000" fill="#000000">Температура</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="mbT210" y="314.93183" x="494.4314" stroke-width="0" stroke="#000" fill="#000000">mbT210</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_12" y="325.20209" x="431.18823" stroke-width="0" stroke="#000" fill="#000000">Влажность</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="mbW210" y="325.74263" x="490.64762" stroke-width="0" stroke="#000" fill="#000000">mbW210</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_14" y="336.55343" x="431.72877" stroke-width="0" stroke="#000" fill="#000000">Давление</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="9" id="mbdP208_210" y="336.55343" x="485.78276" stroke-width="0" stroke="#000" fill="#000000">mbdP208_210</text>
			
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_16" y="244.66164" x="33.35086" stroke-width="0" stroke="#000" fill="#000000">206. Мойка клеток</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_17" y="258.17513" x="30.64816" stroke-width="0" stroke="#000" fill="#000000">Давление</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="mbdP206_209" y="257.63459" x="77.13459" stroke-width="0" stroke="#000" fill="#000000">mbdP206_209</text>

			
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_19" y="303.03995" x="227.40469" stroke-width="0" stroke="#000" fill="#000000">209. Чистый склад</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_20" y="319.25615" x="225.24253" stroke-width="0" stroke="#000" fill="#000000">Давление</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="mbdP208_209" y="318.71561" x="274.43166" stroke-width="0" stroke="#000" fill="#000000">mbdP208_209</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_22" y="247.90488" x="284.16138" stroke-width="0" stroke="#000" fill="#000000">207. Шлюз</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_23" y="301.41833" x="538.75569" stroke-width="0" stroke="#000" fill="#000000">211. Мыши</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_24" y="312.76967" x="538.75569" stroke-width="0" stroke="#000" fill="#000000">Температура</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_25" y="312.22913" x="598.75562" stroke-width="0" stroke="#000" fill="#000000">mbT211</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_26" y="322.49939" x="540.91785" stroke-width="0" stroke="#000" fill="#000000">Влажность</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="mbW211" y="321.95885" x="598.75562" stroke-width="0" stroke="#000" fill="#000000">mbW211</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_28" y="332.76964" x="540.37731" stroke-width="0" stroke="#000" fill="#000000">Давление</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="mbdP208_211" y="332.76964" x="591.18806" stroke-width="0" stroke="#000" fill="#000000">mbdP208_211</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_30" y="304.66157" x="650.64745" stroke-width="0" stroke="#000" fill="#000000">212. Мыши</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_31" y="319.25615" x="647.40421" stroke-width="0" stroke="#000" fill="#000000">Температура</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="mbT212" y="318.17507" x="709.02576" stroke-width="0" stroke="#000" fill="#000000">mbT212</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_33" y="330.60748" x="650.10691" stroke-width="0" stroke="#000" fill="#000000">Влажность</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="mb212" y="328.98586" x="709.5663" stroke-width="0" stroke="#000" fill="#000000">mb212</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="svg_35" y="340.87774" x="649.56637" stroke-width="0" stroke="#000" fill="#000000">Давление</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="8" id="mbdP208_212" y="340.3372" x="700.91766" stroke-width="0" stroke="#000" fill="#000000">mbdP208_212</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_37" y="248.44542" x="452.80984" stroke-width="0" stroke="#000" fill="#000000">208. Чистый коридор</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_38" y="32.22945" x="356.05319" stroke-width="0" stroke="#000" fill="#000000">217. Раздевалка</text>
			<text xml:space="preserve" text-anchor="start" font-family="Arial" font-size="10" id="svg_39" y="186.82386" x="423.08014" stroke-width="0" stroke="#000" fill="#000000">216. УФ шлюз</text>
			<foreignObject id="unit_215" x="526" y="32" width="260" height="260">
				<div class="svg_embedded" xmlns="http://www.w3.org/1999/xhtml">
					<p style="font-size: 120%">215.Крысы</</p>
					<table>
						<tr><td>Температура:</td><td id="mbT215">-</td></tr>
						<tr><td>Влажность:</td><td id="mbW215">-</td></tr>
						<tr><td>Давление:</td><td id="mbdP208_215">-</td></tr>
					</table>
				</div>
			</foreignObject>			
			<foreignObject id="unit_14" x="648" y="32" width="260" height="260">
				<div class="svg_embedded" xmlns="http://www.w3.org/1999/xhtml">
					<p style="font-size: 120%">214.Операционная</p>
					<table>
						<tr><td>Температура:</td><td id="mbT214">-</td></tr>
						<tr><td>Влажность:</td><td id="mbW214">-</td></tr>
						<tr><td>Давление:</td><td id="mbdP214_213">-</td></tr>
					</table>
				</div>
			</foreignObject>			
			</svg>
					<script src="./js/page_2.js"></script>
					<script>
						svg = document.querySelector('svg');
						setSVGForeignObjectsNonScale(svg);
						window.dispatchEvent(new Event('resize'))
					</script>
				</div>
			</div>
		</div>
	</div>
	</body>
</html>