<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8">
		<title>ESA SCADA</title>
		<meta name="viewport" content="height=device-height, width=device-width, initial-scale=1">

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

		<script type="text/javascript">
			function floorChart() {
				setInterval(
					function() {
						var req = new XMLHttpRequest();
						req.open("POST", "http://192.168.22.252:8686/parameter/?page=3");
						req.onreadystatechange = function() {
							if(this.readyState === 4 && this.status === 200) {
								parameters = JSON.parse(this.response);
								console.log('PARAMS:', parameters);
								for(let i=0; i < parameters.length; i++) {
									let elem = document.getElementById(parameters[i].ID);
									if(elem != null) {
										elem.innerHTML = parameters[i].Value;
										elem.style.fill = parameters[i].color;
									};
								};
							};
						};
						req.send();
					}, 
					5000
				);
			}
			function svgScale() {
				h = window.innerHeight;
				w = window.innerWidth;
				let elem=document.getElementById("floor_plan"); 
					if(elem !=null) { 
						elem.style.width = w *0.95;
						elem.style.height = h * 0.95;
					};
			}
//			floorChart();
		</script>
	</head>
	<body onresize="svgScale();" onload="svgScale();">
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-8">
				<form id="navigation">
					<button buttontype="submit" class="btn btn-basic" formmethod="get" formaction="http://192.168.22.252:8686/page_1">Сводная</button>
					<button buttontype="submit" class="btn btn-basic" formmethod="get" formaction="http://192.168.22.252:8686/page_2">2 Этаж</button>
					<button buttontype="submit" class="btn btn-basic" disabled>3 Этаж</button>
				</form>
			</div>
			<div class="col-sm-2">
				<p style="font-size: 1.5em">Этаж 3</p>
			</div>
		</div>
	</div>
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-12">
				<div class="container-fluid" >
					<svg id="floor_plan" xmlns="http://www.w3.org/2000/svg" width="1848" height="1024" viewBox="-1 -1 1850 1026" version="1.1">
						<g stroke-width="0.5" stroke="black" fill="none">
							<polyline points=" 1216,672 1216,664 1224,664 1224,672 1240,672 1240,680 1168,680 1168,888 1160,888 1160,680 712,680 712,976 1160,976 1160,960 1168,960 1168,976 1416,976 1416,856 1424,856 1424,976 1808,976 1808,680 1424,680 1424,784 1416,784 1416,680 1352,680 1352,672 1808,672 1808,528 1672,528 1672,288 1704,288 1704,296 1680,296 1680,496 1808,496 1808,296 1792,296 1792,288 1808,288 1808,48 1552,48 1552,72 1544,72 1544,48 1200,48 1200,496 1544,496 1544,192 1552,192 1552,496 1568,496 1568,528 1224,528 1224,536 1216,536 1216,528 1104,528 1104,496 1192,496 1192,312 1096,312 1096,304 1192,304 1192,48 912,48 912,72 904,72 904,48 744,48 744,232 752,232 752,240 744,240 744,496 768,496 768,528 480,528 480,496 496,496 496,456 528,456 528,496 712,496 712,48 528,48 528,376 496,376 496,48 368,48 368,200 352,200 352,176 248,176 248,48 40,48 40,496 352,496 352,272 368,272 368,496 376,496 376,528 368,528 368,576 360,576 360,528 40,528 40,672 360,672 360,648 368,648 368,832 376,832 376,840 360,840 360,680 40,680 40,976 472,976 472,840 464,840 464,832 472,832 472,784 480,784 480,976 704,976 704,680 480,680 480,712 472,712 472,680 456,680 456,672 1216,672 " /> 
							<polyline points=" 856,400 840,400 840,376 832,376 832,352 840,352 840,368 904,368 904,240 840,240 840,304 832,304 832,240 824,240 824,232 904,232 904,144 912,144 912,304 1024,304 1024,312 912,312 912,496 1024,496 1024,528 840,528 840,488 840,448 856,448 856,496 904,496 904,376 856,376 856,400 " /> 
							<polyline points=" 0,8 0,1024 1848,1024 1848,8 0,8 " /> 
						</g>
					</svg>
				</div>
			</div>
		</div>
	</div>
	</body>
</html>